<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Research Assistant</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Temporarily disable share functionality */
        .share-container {
            display: none !important;
        }

        /* Styling for the new sections */
        .info-section {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
        }

        .example-questions {
            background-color: #f8fafc;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .example-questions h4 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .example-questions ul {
            margin-bottom: 0;
            list-style: none;
            padding-left: 0;
        }

        .example-questions li {
            margin-bottom: 12px;
        }

        .example-questions button {
            background: none;
            border: none;
            color: #3498db;
            text-decoration: none;
            cursor: pointer;
            padding: 0;
            font: inherit;
            text-align: left;
            transition: color 0.2s;
            position: relative;
            padding-left: 24px;
            display: block;
            width: 100%;
            line-height: 1.5;
        }

        .example-questions button:before {
            content: "→";
            position: absolute;
            left: 0;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
        }

        .example-questions button:hover {
            color: #2980b9;
        }

        .example-questions button:hover:before {
            opacity: 1;
            transform: translateX(4px);
        }

        .under-the-hood {
            margin-top: 40px;
        }

        .under-the-hood h3 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .workflow-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .workflow-step {
            background: #ffffff;
            border-radius: 10px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid #e9ecef;
        }

        .workflow-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .step-icon {
            color: #3498db;
            font-size: 1.5rem;
            margin-bottom: 16px;
        }

        .workflow-step h4 {
            color: #2c3e50;
            margin: 0 0 12px 0;
            font-size: 1.1rem;
        }

        .workflow-step p {
            color: #5c6c7c;
            margin: 0;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .system-info {
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
            border-left: 4px solid #3498db;
        }

        .system-info p {
            margin: 0;
            color: #2c3e50;
            line-height: 1.6;
        }

        .parameters-info {
            background: #ffffff;
            border-radius: 10px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
        }

        .parameters-info h4 {
            color: #2c3e50;
            margin: 0 0 16px 0;
            font-size: 1.1rem;
        }

        .parameters-info ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .parameters-info li {
            margin-bottom: 16px;
            padding-left: 24px;
            position: relative;
            color: #5c6c7c;
            line-height: 1.5;
        }

        .parameters-info li:last-child {
            margin-bottom: 0;
        }

        .parameters-info li:before {
            content: "•";
            color: #3498db;
            position: absolute;
            left: 8px;
        }

        .parameters-info strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 4px;
        }

        /* Tree Visualization Styles */
        #tree-visualization {
            padding: 20px;
            margin: 0 auto;
        }

        #tree-visualization .node-container {
            margin: 15px 0;
        }

        #tree-visualization .node {
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: box-shadow 0.2s;
            max-width: 600px;
        }

        #tree-visualization .node:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #tree-visualization .children {
            margin-left: 40px;
            position: relative;
        }

        #tree-visualization .children::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e0e0e0;
        }

        #tree-visualization .node-question {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        #tree-visualization .node-answer {
            color: #5c6c7c;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        #tree-visualization .node-metadata {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
            font-size: 0.85rem;
            color: #94a3b8;
        }

        #visualization-tab {
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            margin-top: 20px;
        }

        .tabs {
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            gap: 10px;
        }

        .tab-button {
            padding: 12px 24px;
            border: none;
            background: none;
            color: #64748b;
            font-size: 1rem;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .tab-button[data-tab="visualization"] {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-button[data-tab="visualization"]::before {
            content: '\f1e0';
            /* This is a tree-like icon */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.9em;
        }

        .tab-button[data-tab="visualization"]::after {
            content: 'New!';
            position: absolute;
            top: -8px;
            right: -8px;
            background: #3498db;
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 12px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .tab-button:hover {
            color: #3498db;
        }

        .tab-button.active {
            color: #3498db;
            font-weight: 600;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: #3498db;
        }

        /* Tree Preview styles */
        .tree-preview {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e9ecef;
        }

        .tree-preview-content {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .tree-preview-content>i {
            font-size: 2rem;
            color: #3498db;
        }

        .preview-text {
            flex: 1;
        }

        .preview-text h4 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .preview-text p {
            margin: 0;
            color: #64748b;
            font-size: 0.95rem;
        }

        .preview-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .preview-button:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            .workflow-container {
                grid-template-columns: 1fr;
            }

            .workflow-step {
                padding: 20px;
            }

            .parameters-info {
                padding: 20px;
            }

            /* Mobile styles for tree visualization */
            #tree-visualization {
                overflow-x: auto;
                padding: 15px;
                -webkit-overflow-scrolling: touch;
            }

            #tree-visualization .node {
                margin: 10px 0;
                padding: 12px;
                font-size: 14px;
                word-wrap: break-word;
                max-width: 280px;
            }

            #tree-visualization .node-container {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                margin: 10px 0;
            }

            #tree-visualization .children {
                margin-left: 20px;
                border-left: 2px solid #e0e0e0;
                padding-left: 15px;
            }

            #tree-visualization .node-content {
                background: #ffffff;
                border: 1px solid #e0e0e0;
                border-radius: 8px;
                padding: 12px;
                margin: 5px 0;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
                width: 100%;
                box-sizing: border-box;
            }

            #tree-visualization .node-question {
                font-weight: 600;
                color: #2c3e50;
                margin-bottom: 8px;
            }

            #tree-visualization .node-answer {
                color: #5c6c7c;
                font-size: 13px;
                line-height: 1.4;
            }

            #visualization-tab {
                padding: 10px;
            }

            .tree-preview-content {
                flex-direction: column;
                text-align: center;
                padding: 20px;
            }

            .preview-button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="mobile-disclaimer">
        <i class="fas fa-info-circle"></i> For the best experience, please use a desktop browser.
    </div>
    <div class="container">
        <header>
            <h1>Deep Research Assistant</h1>
            <p>AI-powered tool to break down complex research questions</p>
        </header>

        <main>
            <section class="intro">
                <h2>How It Works</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Enter Your Question</h3>
                            <p>Type in a complex research question you want to explore.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Configure Parameters</h3>
                            <p>Adjust optional parameters or use the default values.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Get Results</h3>
                            <p>Receive a comprehensive answer and see how your question was broken down.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="info-section">
                <div class="example-questions">
                    <h4>Try These Example Questions</h4>
                    <ul>
                        <li><button class="example-question-btn">What are the economic and environmental impacts of
                                renewable energy adoption globally?</button></li>
                        <li><button class="example-question-btn">How has artificial intelligence influenced modern
                                healthcare systems, and what ethical concerns have emerged?</button></li>
                        <li><button class="example-question-btn">What are the psychological and sociological factors
                                that contribute to the spread of misinformation on social media?</button></li>
                        <li><button class="example-question-btn">How do different educational approaches affect
                                childhood development and future career success?</button></li>
                        <li><button class="example-question-btn">What are the most promising technologies for addressing
                                climate change, and what are their limitations?</button></li>
                    </ul>
                </div>

                <div class="under-the-hood">
                    <h3>Under the Hood: How This Works</h3>
                    <div class="workflow-container">
                        <div class="workflow-step">
                            <div class="step-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="step-content">
                                <h4>Question Analysis</h4>
                                <p>When you submit a question, the system first analyzes its complexity to determine if
                                    it needs to be broken down.</p>
                            </div>
                        </div>

                        <div class="workflow-step">
                            <div class="step-icon">
                                <i class="fas fa-code-branch"></i>
                            </div>
                            <div class="step-content">
                                <h4>Recursive Breakdown</h4>
                                <p>Complex questions are intelligently divided into simpler sub-questions, which may be
                                    further broken down if needed.</p>
                            </div>
                        </div>

                        <div class="workflow-step">
                            <div class="step-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="step-content">
                                <h4>Parallel Processing</h4>
                                <p>The system processes multiple sub-questions simultaneously to provide faster results.
                                </p>
                            </div>
                        </div>

                        <div class="workflow-step">
                            <div class="step-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="step-content">
                                <h4>Individual Answers</h4>
                                <p>Each leaf question receives its own detailed answer.</p>
                            </div>
                        </div>

                        <div class="workflow-step">
                            <div class="step-icon">
                                <i class="fas fa-puzzle-piece"></i>
                            </div>
                            <div class="step-content">
                                <h4>Answer Synthesis</h4>
                                <p>All individual answers are combined into a comprehensive response to your original
                                    question.</p>
                            </div>
                        </div>

                        <div class="workflow-step">
                            <div class="step-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="step-content">
                                <h4>Visualization</h4>
                                <p>The question tree shows you exactly how your question was broken down and answered.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="system-info">
                        <p>The system uses Claude AI (via Anthropic's API) with carefully engineered prompts to ensure
                            high-quality, accurate responses. The recursive approach allows for handling questions of
                            virtually any complexity.</p>
                    </div>

                    <div class="parameters-info">
                        <h4>Advanced Parameters</h4>
                        <ul>
                            <li>
                                <strong>Maximum Recursion Depth:</strong> Controls how many levels deep your question
                                can be broken down. Higher values allow for more detailed analysis but take longer to
                                process.
                            </li>
                            <li>
                                <strong>Maximum Sub-Questions:</strong> Limits how many sub-questions can be generated
                                at each level. More sub-questions provide broader coverage but increase processing time.
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="research-form">
                <h2>Ask Your Research Question</h2>
                <form id="question-form">
                    <div class="form-group">
                        <label for="research-question">Research Question:</label>
                        <textarea id="research-question" placeholder="Enter your research question here..."
                            required></textarea>
                    </div>

                    <div class="parameters-section">
                        <h3>Advanced Parameters <button type="button" id="toggle-parameters" class="toggle-button"><i
                                    class="fas fa-chevron-down"></i></button></h3>
                        <div id="parameters-container" class="hidden">
                            <div class="parameter-group">
                                <div class="form-group">
                                    <label for="recursion-depth">Maximum Recursion Depth:</label>
                                    <div class="parameter-input">
                                        <input type="range" id="recursion-depth" min="0" max="4" value="2">
                                        <span id="recursion-depth-value">2</span>
                                    </div>
                                    <p class="parameter-description">Controls how many levels deep the question can be
                                        broken down (0-4).</p>
                                </div>

                                <div class="form-group">
                                    <label for="sub-questions">Maximum Sub-Questions:</label>
                                    <div class="parameter-input">
                                        <input type="range" id="sub-questions" min="1" max="5" value="5">
                                        <span id="sub-questions-value">5</span>
                                    </div>
                                    <p class="parameter-description">Limits the number of sub-questions generated at
                                        each level (1-5).</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" id="submit-button">Generate Research</button>
                        <div id="loading-indicator">
                            <div class="spinner"></div>
                            <p>Processing your question...</p>
                        </div>
                    </div>
                </form>
            </section>

            <section id="results-section" class="hidden">
                <div class="results-container">
                    <h2>Research Results</h2>

                    <div class="share-container">
                        <button id="share-button" class="share-button">
                            <i class="fas fa-share-alt"></i> Share Results
                        </button>
                        <div id="share-options" class="share-options hidden">
                            <div class="share-link-container">
                                <input type="text" id="share-link" readonly>
                                <button id="copy-link-button">Copy</button>
                            </div>
                            <div class="social-share-buttons">
                                <button id="share-twitter" class="social-share-button twitter">
                                    <i class="fab fa-twitter"></i> Twitter
                                </button>
                                <button id="share-facebook" class="social-share-button facebook">
                                    <i class="fab fa-facebook-f"></i> Facebook
                                </button>
                                <button id="share-linkedin" class="social-share-button linkedin">
                                    <i class="fab fa-linkedin-in"></i> LinkedIn
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="tabs">
                        <button class="tab-button active" data-tab="answer">Answer</button>
                        <button class="tab-button" data-tab="visualization">Question Tree</button>
                    </div>

                    <div class="tab-content">
                        <div id="answer-tab" class="tab-pane active">
                            <div id="answer-content"></div>
                            <div class="tree-preview">
                                <div class="tree-preview-content">
                                    <i class="fas fa-lightbulb"></i>
                                    <div class="preview-text">
                                        <h4>Want to see how we got here?</h4>
                                        <p>Check out the Question Tree to see how your complex question was broken down
                                            and analyzed step by step.</p>
                                    </div>
                                    <button class="preview-button"
                                        onclick="document.querySelector('[data-tab=visualization]').click()">
                                        View Question Tree <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div id="visualization-tab" class="tab-pane">
                            <div id="tree-visualization"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Deep Research Assistant. All rights reserved.</p>
            <p id="environment-tag"></p>
        </footer>
    </div>

    <script src="js/aws-config.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Add functionality for example question buttons
        document.addEventListener('DOMContentLoaded', function () {
            const exampleButtons = document.querySelectorAll('.example-question-btn');
            const questionTextarea = document.getElementById('research-question');

            exampleButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Clean up the text by removing extra whitespace and newlines
                    const questionText = this.textContent.trim().replace(/\s+/g, ' ');
                    questionTextarea.value = questionText;
                    questionTextarea.focus();
                    // Scroll to the form
                    document.querySelector('.research-form').scrollIntoView({ behavior: 'smooth' });
                });
            });
        });
    </script>
</body>

</html>